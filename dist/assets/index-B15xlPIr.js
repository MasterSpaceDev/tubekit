import{c as U,R as e,r as l}from"./globals-D-CxY8t_.js";import{g as J}from"./fingerprint-CD_ZU4Rz.js";function Q(){const[t,n]=l.useState({name:"",email:"",whatsapp:"",password:""}),[s,o]=l.useState(""),[d,f]=l.useState(!1),[u,x]=l.useState(null);l.useEffect(()=>{J().then(m=>x(m))},[]);const c=async m=>{if(m.preventDefault(),o(""),!t.name.trim()){o("Name is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)){o("Invalid email");return}if(t.password.length<6){o("Password must be at least 6 characters");return}if(!u){o("Device fingerprint not ready. Please wait...");return}f(!0);try{const v=await(await fetch("/api/auth/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,...u})})).json();v.success?window.location.href="/":o(v.error||"Failed to submit")}catch(h){o("Network error: "+h.message)}finally{f(!1)}};return e.createElement("div",{className:"auth-container"},e.createElement("div",{className:"auth-card"},e.createElement("div",{className:"auth-header"},e.createElement("div",{className:"auth-logo"},"T"),e.createElement("h1",{className:"auth-title"},"Request Access"),e.createElement("p",{className:"auth-subtitle"},"Join TubeKit - Invite Only")),e.createElement("form",{onSubmit:c,className:"auth-form"},s&&e.createElement("div",{className:"auth-error"},s),e.createElement("div",{className:"auth-field"},e.createElement("label",{className:"auth-label"},"Full Name"),e.createElement("input",{value:t.name,onChange:m=>n({...t,name:m.target.value}),placeholder:"Enter your name",className:"auth-input",required:!0})),e.createElement("div",{className:"auth-field"},e.createElement("label",{className:"auth-label"},"Email Address"),e.createElement("input",{type:"email",value:t.email,onChange:m=>n({...t,email:m.target.value}),placeholder:"Enter your email",className:"auth-input",required:!0})),e.createElement("div",{className:"auth-field"},e.createElement("label",{className:"auth-label"},"WhatsApp Number (Optional)"),e.createElement("input",{value:t.whatsapp,onChange:m=>n({...t,whatsapp:m.target.value}),placeholder:"Enter your number",className:"auth-input"})),e.createElement("div",{className:"auth-field"},e.createElement("label",{className:"auth-label"},"Password"),e.createElement("input",{type:"password",value:t.password,onChange:m=>n({...t,password:m.target.value}),placeholder:"Create a password (min 6 characters)",className:"auth-input",required:!0})),e.createElement("button",{type:"submit",disabled:d,className:"auth-btn"},d?"Submitting...":"Request Access")),e.createElement("div",{className:"auth-footer"},e.createElement("p",{className:"auth-footer-text"},"Already have an account?"," ",e.createElement("a",{href:"/login",className:"auth-link"},"Sign In")))))}function K(){return e.createElement("div",{className:"auth-container"},e.createElement("div",{className:"auth-card"},e.createElement("div",{className:"auth-header"},e.createElement("div",{className:"auth-logo",style:{background:"linear-gradient(135deg,#f59e0b,#d97706)"}},"â³"),e.createElement("h1",{className:"auth-title",style:{color:"#f59e0b"}},"Approval Pending"),e.createElement("p",{className:"auth-subtitle"},"Your request is being reviewed")),e.createElement("div",{style:{textAlign:"center",fontSize:"14px",color:"var(--text-muted)",lineHeight:"1.6",marginBottom:"24px"}},"We'll review your request within 24 hours. Contact us on WhatsApp for faster approval."),e.createElement("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"12px",padding:"16px",marginBottom:"20px",textAlign:"center"}},e.createElement("div",{style:{fontSize:"13px",color:"#92400e",fontWeight:"600",marginBottom:"8px"}},"Contact Number"),e.createElement("div",{style:{fontSize:"18px",fontWeight:"700",color:"#78350f",letterSpacing:"0.5px"}},"+1 (406) 792-5197")),e.createElement("a",{href:"https://wa.me/14067925197",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",width:"100%",padding:"14px 24px",background:"#25D366",color:"white",borderRadius:"12px",fontSize:"15px",fontWeight:"600",textDecoration:"none",boxShadow:"0 4px 12px rgba(37, 211, 102, 0.3)",transition:"all 0.2s"},onMouseEnter:t=>t.currentTarget.style.transform="translateY(-2px)",onMouseLeave:t=>t.currentTarget.style.transform="translateY(0)"},e.createElement("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor"},e.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})),"Contact on WhatsApp")))}function V({user:t,onProfileClick:n,onAddSerial:s}){return e.createElement("header",{className:"header"},e.createElement("div",{className:"brand"},e.createElement("div",{className:"logo"},"T"),e.createElement("div",null,e.createElement("div",{className:"title"},"TubeKit"),e.createElement("div",{className:"subtitle"},"Serials Download"))),e.createElement("div",{className:"controls"},e.createElement("button",{className:"btn btn-add",onClick:s},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M12 5v14M5 12h14"})),"Add Serial"),e.createElement("button",{className:"btn",onClick:n},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},e.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.createElement("circle",{cx:"12",cy:"7",r:"4"})),"Profile")))}function G({serial:t,onClick:n,onRemove:s}){return e.createElement("div",{className:"card"},e.createElement("button",{className:"card-remove",onClick:o=>{o.stopPropagation(),s(t)},title:"Remove from dashboard"},e.createElement("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))),e.createElement("div",{className:"serial-name"},t.name),e.createElement("div",{className:"episode",onClick:n},e.createElement("div",{className:"ep-left"},e.createElement("div",{className:"ep-title"},"Latest Episode"),e.createElement("div",{className:"ep-date"},t.date||"Not available")),e.createElement("button",{className:"dl-btn"},e.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.createElement("polyline",{points:"7 10 12 15 17 10"}),e.createElement("line",{x1:"12",y1:"15",x2:"12",y2:"3"})))))}function X({onClose:t,onAdd:n}){const[s,o]=l.useState([]),[d,f]=l.useState(!0),[u,x]=l.useState(""),[c,m]=l.useState("all");l.useEffect(()=>{fetch("/api/serials/available",{credentials:"include"}).then(a=>{if(a.status===401){window.location.href="/login?message=session-expired";return}return a.json()}).then(a=>{a&&(o(a.serials||[]),f(!1))}).catch(()=>f(!1))},[]);const h=l.useMemo(()=>{const a={};return s.forEach(i=>{a[i.platform_slug]||(a[i.platform_slug]={id:i.platform_slug,name:i.platform_name,serials:[]}),a[i.platform_slug].serials.push(i)}),Object.values(a)},[s]),v=l.useMemo(()=>{let a=s;return c!=="all"&&(a=a.filter(i=>i.platform_slug===c)),u&&(a=a.filter(i=>i.name.toLowerCase().includes(u.toLowerCase()))),a},[s,c,u]),g=async a=>{try{const i=await fetch("/api/serials/add",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({serialId:a})});if(i.status===401){window.location.href="/login?message=session-expired";return}const L=await i.json();L.success?(o(b=>b.map(k=>k.id===a?{...k,isAdded:!0}:k)),n()):alert(L.error||"Failed to add serial")}catch(i){alert("Network error: "+i.message)}};return e.createElement("div",{className:"modal-bg show"},e.createElement("div",{className:"modal add-serial-modal"},e.createElement("button",{className:"modal-close",onClick:t},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))),e.createElement("div",{className:"modal-hdr"},e.createElement("div",{className:"modal-icon"},e.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M12 5v14M5 12h14",stroke:"currentColor"}))),e.createElement("div",{className:"modal-title"},"Add Serial"),e.createElement("div",{className:"modal-subtitle"},"Choose serials to add to your dashboard")),e.createElement("div",{className:"add-serial-filters"},e.createElement("div",{className:"input"},e.createElement("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},e.createElement("circle",{cx:"11",cy:"11",r:"8",stroke:"#6b7380",strokeWidth:"1.6"}),e.createElement("path",{d:"M21 21l-4.35-4.35",stroke:"#6b7380",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})),e.createElement("input",{placeholder:"Search serials...",value:u,onChange:a=>x(a.target.value)})),e.createElement("div",{className:"platform-pills"},e.createElement("button",{className:`pill ${c==="all"?"active":""}`,onClick:()=>m("all")},"All"),h.map(a=>e.createElement("button",{key:a.id,className:`pill ${c===a.id?"active":""}`,onClick:()=>m(a.id)},a.name)))),e.createElement("div",{className:"serial-list"},d?e.createElement("div",{className:"loading-state"},"Loading serials..."):v.length===0?e.createElement("div",{className:"empty-state"},"No serials found"):v.map(a=>e.createElement("div",{key:a.id,className:"serial-item"},e.createElement("div",{className:"serial-item-info"},e.createElement("div",{className:"serial-item-name"},a.name),e.createElement("div",{className:"serial-item-platform"},a.platform_name)),e.createElement("button",{className:`serial-item-btn ${a.isAdded?"added":""}`,onClick:()=>!a.isAdded&&g(a.id),disabled:a.isAdded},a.isAdded?e.createElement(e.Fragment,null,e.createElement("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("polyline",{points:"20 6 9 17 4 12"})),"Added"):e.createElement(e.Fragment,null,e.createElement("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M12 5v14M5 12h14"})),"Add")))))))}function Z({serial:t,onClose:n,onDownload:s}){return e.createElement("div",{className:"modal-bg show"},e.createElement("div",{className:"modal"},e.createElement("button",{className:"modal-close",onClick:n},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))),e.createElement("div",{className:"modal-hdr"},e.createElement("div",{className:"modal-icon"},e.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.createElement("polyline",{points:"7 10 12 15 17 10"}),e.createElement("line",{x1:"12",y1:"15",x2:"12",y2:"3"}))),e.createElement("div",{className:"modal-title"},"Select Version"),e.createElement("div",{className:"modal-subtitle"},"Choose your preferred download option for ",t.name)),e.createElement("div",{className:"modal-btns"},e.createElement("button",{className:"modal-btn primary",onClick:()=>s("original")},e.createElement("span",null,"Original Episode"),e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},e.createElement("polyline",{points:"9 18 15 12 9 6"}))),e.createElement("button",{className:"modal-btn secondary",onClick:()=>s("bypass")},e.createElement("span",null,"Half Screen [BYPASS]"),e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},e.createElement("polyline",{points:"9 18 15 12 9 6"}))),e.createElement("button",{className:"modal-btn secondary",onClick:()=>window.open(`https://dl.tubekit.net/thumbnail_${t.id}.jpg`,"_blank")},e.createElement("span",null,"Thumbnail"),e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.createElement("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.createElement("polyline",{points:"21 15 16 10 5 21"}))))))}function ee({type:t,progress:n,onClose:s}){const o=n>0;return e.createElement("div",{className:"modal-bg download-modal show"},e.createElement("div",{className:"modal"},e.createElement("button",{className:"modal-close",onClick:s},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))),e.createElement("div",{className:"modal-hdr"},!o&&e.createElement("div",{className:"spinner"}),e.createElement("div",{className:"modal-title"},o?"Processing Video":"Processing..."),e.createElement("div",{className:"modal-subtitle"},t==="bypass"?"Please wait 3-5 minutes while we edit the video on our servers":"Preparing your download, this will take a moment"),o&&e.createElement("div",{className:"progress-wrap show"},e.createElement("div",{className:"progress-bar"},e.createElement("div",{className:"progress-fill",style:{width:`${n}%`}})),e.createElement("div",{className:"progress-info"},e.createElement("span",{className:"progress-percent"},n,"%"))))))}function te({onClose:t}){return e.createElement("div",{className:"modal-bg download-modal show"},e.createElement("div",{className:"modal"},e.createElement("button",{className:"modal-close",onClick:t},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))),e.createElement("div",{className:"modal-hdr"},e.createElement("div",{className:"modal-icon error"},e.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("circle",{cx:"12",cy:"12",r:"10"}),e.createElement("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.createElement("line",{x1:"9",y1:"9",x2:"15",y2:"15"}))),e.createElement("div",{className:"modal-title"},"Download Failed"),e.createElement("div",{className:"modal-subtitle"},"Failed to download episode from OTT Platform server. Please try again after few minutes"))))}function ae(){return e.createElement("div",{className:"modal-bg show",style:{zIndex:9999}},e.createElement("div",{className:"modal",style:{maxWidth:"450px"}},e.createElement("div",{className:"modal-hdr"},e.createElement("div",{className:"modal-icon",style:{background:"linear-gradient(135deg, #f59e0b, #d97706)"}},e.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("circle",{cx:"12",cy:"12",r:"10"}),e.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.createElement("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"}))),e.createElement("div",{className:"modal-title",style:{color:"#f59e0b"}},"Your Plan has been expired"),e.createElement("div",{className:"modal-subtitle",style:{marginBottom:"24px"}},"Please contact for renew your plan"),e.createElement("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"12px",padding:"16px",marginBottom:"20px",textAlign:"center"}},e.createElement("div",{style:{fontSize:"13px",color:"#92400e",fontWeight:"600",marginBottom:"8px"}},"Contact Number"),e.createElement("div",{style:{fontSize:"18px",fontWeight:"700",color:"#78350f",letterSpacing:"0.5px"}},"+92 340 4598850")),e.createElement("a",{href:"https://wa.me/923404598850",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",width:"100%",padding:"14px 24px",background:"#25D366",color:"white",borderRadius:"12px",fontSize:"15px",fontWeight:"600",textDecoration:"none",boxShadow:"0 4px 12px rgba(37, 211, 102, 0.3)",transition:"all 0.2s"},onMouseEnter:t=>t.currentTarget.style.transform="translateY(-2px)",onMouseLeave:t=>t.currentTarget.style.transform="translateY(0)"},e.createElement("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor"},e.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})),"Contact on WhatsApp"))))}function le({serialName:t}){return e.createElement("div",{className:"toast show"},e.createElement("div",{className:"toast-icon"},e.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.createElement("polyline",{points:"7 10 12 15 17 10"}),e.createElement("line",{x1:"12",y1:"15",x2:"12",y2:"3"}))),e.createElement("div",{className:"toast-content"},e.createElement("div",{className:"toast-title"},t),e.createElement("div",{className:"toast-msg"},"Download started successfully")))}function re({user:t,onClose:n}){return e.createElement("div",{className:"modal-bg show"},e.createElement("div",{className:"modal"},e.createElement("button",{className:"modal-close",onClick:n},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))),e.createElement("div",{className:"modal-hdr"},e.createElement("div",{className:"modal-icon"},e.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.createElement("circle",{cx:"12",cy:"7",r:"4"}))),e.createElement("div",{className:"modal-title"},"User Profile"),e.createElement("div",{className:"modal-subtitle"},"Your account information")),e.createElement("div",{className:"profile-info"},e.createElement("div",{className:"profile-item"},e.createElement("div",{className:"profile-label"},"Full Name"),e.createElement("div",{className:"profile-value"},t.name)),e.createElement("div",{className:"profile-item"},e.createElement("div",{className:"profile-label"},"Email Address"),e.createElement("div",{className:"profile-value"},t.email)),e.createElement("div",{className:"profile-item"},e.createElement("div",{className:"profile-label"},"WhatsApp Number"),e.createElement("div",{className:"profile-value"},t.whatsapp)))))}function ne({serialName:t,onConfirm:n,onCancel:s}){return e.createElement("div",{className:"modal-bg show"},e.createElement("div",{className:"modal confirm-modal"},e.createElement("button",{className:"modal-close",onClick:s},e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))),e.createElement("div",{className:"modal-hdr"},e.createElement("div",{className:"modal-icon warning"},e.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("circle",{cx:"12",cy:"12",r:"10"}),e.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.createElement("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"}))),e.createElement("div",{className:"modal-title"},"Remove Serial"),e.createElement("div",{className:"modal-subtitle"},'Are you sure you want to remove "',t,'" from your dashboard?')),e.createElement("div",{className:"confirm-actions"},e.createElement("button",{className:"confirm-btn cancel",onClick:s},"Cancel"),e.createElement("button",{className:"confirm-btn delete",onClick:n},"Remove"))))}function se({user:t}){const[n,s]=l.useState(""),[o,d]=l.useState([]),[f,u]=l.useState(!1),[x,c]=l.useState(!1),[m,h]=l.useState(!1),[v,g]=l.useState(!1),[a,i]=l.useState(!1),[L,b]=l.useState(!1),[k,W]=l.useState(!1),[w,T]=l.useState(null),[S,P]=l.useState(null),[D,j]=l.useState(0),[R,I]=l.useState(""),M=l.useRef(null),A=()=>{fetch("/api/serials",{credentials:"include"}).then(r=>{if(r.status===401){window.location.href="/login?message=session-expired";return}return r.json()}).then(r=>{r&&d(r.serials||[])})},E=()=>{M.current&&(clearInterval(M.current),M.current=null)};l.useEffect(()=>(A(),()=>E()),[]);const F=l.useMemo(()=>o.filter(r=>r.name.toLowerCase().includes(n.toLowerCase())),[o,n]),O=o.length===0,N=()=>{E(),u(!1),c(!1),h(!1),i(!1),b(!1),W(!1)},_=async r=>{u(!1),c(!0),I(r),j(0);try{const p=await fetch("/api/download",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({serialId:w.id,type:r})});if(p.status===401){window.location.href="/login?message=session-expired";return}const y=await p.json();y.status==="ready"?(E(),window.location.href=y.downloadUrl,c(!1),g(!0),setTimeout(()=>g(!1),3e3)):y.status==="queued"||y.status==="processing"?z(w.id,r):(E(),c(!1),h(!0))}catch{E(),c(!1),h(!0)}},z=(r,p)=>{E();const y=setInterval(async()=>{try{const B=await fetch("/api/status/check?serialId="+encodeURIComponent(r)+"&type="+encodeURIComponent(p),{credentials:"include"});if(B.status===401){E(),window.location.href="/login?message=session-expired";return}const C=await B.json();C.status==="processing"&&j(C.progress||0),C.status==="ready"&&(E(),window.location.href=C.downloadUrl,c(!1),g(!0),setTimeout(()=>g(!1),3e3)),C.status==="error"&&(E(),c(!1),h(!0))}catch{E(),c(!1),h(!0)}},3e3);M.current=y},Y=r=>{T(r),u(!0)},q=r=>{P(r),W(!0)},H=async()=>{if(S){W(!1);try{const r=await fetch(`/api/serials/remove/${S.id}`,{method:"DELETE",credentials:"include"});if(r.status===401){window.location.href="/login?message=session-expired";return}const p=await r.json();p.success?A():alert(p.error||"Failed to remove serial")}catch(r){alert("Network error: "+r.message)}P(null)}},$=()=>{A()};return e.createElement("div",null,e.createElement(V,{user:t,onProfileClick:()=>i(!0),onAddSerial:()=>b(!0)}),O?e.createElement("div",{className:"empty-dashboard"},e.createElement("div",{className:"empty-icon"},e.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("rect",{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"}),e.createElement("polyline",{points:"17 2 12 7 7 2"}))),e.createElement("div",{className:"empty-title"},"Your Dashboard is Empty"),e.createElement("div",{className:"empty-subtitle"},"Add serials to start downloading your favorite shows"),e.createElement("button",{className:"empty-btn",onClick:()=>b(!0)},e.createElement("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M12 5v14M5 12h14"})),"Add Your First Serial")):e.createElement(e.Fragment,null,e.createElement("div",{className:"search-bar"},e.createElement("div",{className:"input"},e.createElement("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},e.createElement("circle",{cx:"11",cy:"11",r:"8",stroke:"#6b7380",strokeWidth:"1.6"}),e.createElement("path",{d:"M21 21l-4.35-4.35",stroke:"#6b7380",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})),e.createElement("input",{placeholder:"Search serials...",value:n,onChange:r=>s(r.target.value)}))),e.createElement("main",{className:"grid"},F.map(r=>e.createElement(G,{key:r.id,serial:r,onClick:()=>Y(r),onRemove:q})))),f&&e.createElement(Z,{serial:w,onClose:N,onDownload:_}),x&&e.createElement(ee,{type:R,progress:D,onClose:N}),m&&e.createElement(te,{onClose:N}),v&&e.createElement(le,{serialName:w==null?void 0:w.name}),a&&e.createElement(re,{user:t,onClose:N}),L&&e.createElement(X,{onClose:N,onAdd:$}),k&&e.createElement(ne,{serialName:S==null?void 0:S.name,onConfirm:H,onCancel:N}))}function oe(){const[t,n]=l.useState("loading"),[s,o]=l.useState(null);return l.useEffect(()=>{fetch("/api/auth/status",{credentials:"include"}).then(d=>{if(d.status===401){window.location.href="/login?message=session-expired";return}return d.json()}).then(d=>{d&&(n(d.status||"guest"),o(d.user||null))})},[]),t==="loading"?e.createElement("div",{className:"container"}):t==="pending"?e.createElement(K,null):t==="expired"?e.createElement(ae,null):t==="guest"?e.createElement(Q,null):e.createElement("div",{className:"container"},e.createElement(se,{user:s||{name:"",email:"",whatsapp:""}}))}U(document.getElementById("root")).render(e.createElement(oe,null));
