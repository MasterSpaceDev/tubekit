import{c as Ce,R as e,r as l}from"./globals-D-CxY8t_.js";function Se(){const[B,U]=l.useState("loading"),[h,j]=l.useState("users"),[m,b]=l.useState("all"),[F,re]=l.useState({}),[d,ce]=l.useState([]),[i,oe]=l.useState([]),[c,f]=l.useState(0),[ie,H]=l.useState(!1),[L,me]=l.useState([]),[De,de]=l.useState(null),[Ae,Ee]=l.useState(""),[M,_]=l.useState({}),[ue,p]=l.useState(!1),[y,v]=l.useState(null),[pe,x]=l.useState(!1),[k,w]=l.useState({userId:null,current:""}),[ve,C]=l.useState(!1),[S,g]=l.useState({userId:null,userName:"",days:"30"}),[Ne,I]=l.useState(!1),[z,V]=l.useState([]),[he,O]=l.useState({id:null,name:""}),[ye,R]=l.useState(!1),[Y,J]=l.useState([]),[D,K]=l.useState({id:null,name:""}),[A,q]=l.useState("today"),[G,we]=l.useState({count:0,period:"Today"}),[P,Q]=l.useState({show:!1,message:"",type:"success"});l.useEffect(()=>{fetch("/api/auth/status",{credentials:"include"}).then(a=>{if(a.status===401){window.location.href="/login?message=session-expired";return}return a.json()}).then(a=>{a&&(a.status==="admin"?(U("authorized"),E()):U("unauthorized"))}).catch(()=>U("unauthorized"))},[]);const E=async()=>{try{const a=await fetch("/api/admin/stats",{credentials:"include"});if(a.status===401){window.location.href="/login?message=session-expired";return}const t=await a.json();re(t.overview||{}),ce(t.users||[]),oe(t.serials||[])}catch(a){console.error("Failed to load admin data:",a)}},X=async a=>{try{const t=M[a]||3,s=d.find(o=>o.id===a),n=await fetch(`/api/admin/users/${a}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({days:t})});if(n.status===401){window.location.href="/login?message=session-expired";return}if(!n.ok){const o=await n.json();r(o.error||"Failed to approve user","error");return}_(o=>{const N={...o};return delete N[a],N}),E(),r(`User "${(s==null?void 0:s.name)||"User"}" approved`,"success")}catch(t){console.error("Failed to approve user:",t),r("Failed to approve user: "+t.message,"error")}},Z=async a=>{try{const t=d.find(n=>n.id===a),s=await fetch(`/api/admin/users/${a}/reject`,{method:"POST",credentials:"include"});if(s.status===401){window.location.href="/login?message=session-expired";return}if(!s.ok){const n=await s.json();r(n.error||"Failed to reject user","error");return}E(),r(`User "${(t==null?void 0:t.name)||"User"}" rejected`,"success")}catch(t){console.error("Failed to reject user:",t),r("Failed to reject user: "+t.message,"error")}},ee=(a,t)=>{v({id:a,name:t}),p(!0)},ge=async()=>{if(y)try{const a=await fetch(`/api/admin/users/${y.id}`,{method:"DELETE",credentials:"include"});if(a.status===401){window.location.href="/login?message=session-expired";return}if(!a.ok){const t=await a.json();r(t.error||"Failed to delete user","error"),p(!1),v(null);return}p(!1),v(null),E(),r("User deleted successfully","success")}catch(a){console.error("Failed to delete user:",a),r("Failed to delete user: "+a.message,"error"),p(!1),v(null)}},ae=(a,t)=>{w({userId:a,current:t||""}),x(!0)},be=async()=>{if(k.userId)try{const a=await fetch(`/api/admin/users/${k.userId}/whatsapp`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({whatsapp:k.current})});if(a.status===401){window.location.href="/login?message=session-expired";return}if(!a.ok){const t=await a.json();r(t.error||"Failed to update WhatsApp","error");return}x(!1),w({userId:null,current:""}),E(),r("WhatsApp number updated","success")}catch(a){console.error("Failed to update WhatsApp:",a),r("Failed to update WhatsApp","error")}},te=async(a,t)=>{try{const s=await fetch(`/api/admin/users/${a}/wa-noti`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({waNoti:!t})});if(s.status===401){window.location.href="/login?message=session-expired";return}if(!s.ok){const n=await s.json();r(n.error||"Failed to toggle notification","error");return}E(),r(`Notification ${t?"disabled":"enabled"}`,"success")}catch(s){console.error("Failed to toggle wa_noti:",s),r("Failed to toggle notification","error")}},se=async(a,t)=>{try{const s=await fetch(`/api/admin/users/${a}/login-history`,{credentials:"include"});if(s.status===401){window.location.href="/login?message=session-expired";return}if(!s.ok)throw new Error("Failed to load login history");const n=await s.json();de(a),Ee(t),me(n.history||[]),H(!0)}catch(s){console.error("Failed to load login history:",s),r("Failed to load login history","error")}},r=(a,t="success")=>{Q({show:!0,message:a,type:t}),setTimeout(()=>Q({show:!1,message:"",type:"success"}),3e3)},le=(a,t)=>{g({userId:a,userName:t,days:"30"}),C(!0)},fe=async()=>{if(!S.userId)return;const a=Number(S.days);if(isNaN(a)||a<=0){r("Please enter a valid number of days","error");return}try{const t=await fetch(`/api/admin/users/${S.userId}/extend-plan`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({days:a})});if(t.status===401){window.location.href="/login?message=session-expired";return}if(!t.ok){const s=await t.json();r(s.error||"Failed to extend plan","error");return}C(!1),g({userId:null,userName:"",days:"30"}),E(),r(`Plan extended by ${a} days`,"success")}catch(t){console.error("Failed to extend plan:",t),r("Failed to extend plan: "+t.message,"error")}},ne=async(a,t)=>{try{const s=await fetch(`/api/admin/users/${a}/serials`,{credentials:"include"});if(s.status===401){window.location.href="/login?message=session-expired";return}if(!s.ok)throw new Error("Failed to load user serials");const n=await s.json();O({id:a,name:t}),V(n.serials||[]),I(!0)}catch(s){console.error("Failed to load user serials:",s),r("Failed to load user serials","error")}},T=async(a,t,s="today")=>{try{const n=await fetch(`/api/admin/users/${a}/downloads?period=${s}`,{credentials:"include"});if(n.status===401){window.location.href="/login?message=session-expired";return}if(!n.ok)throw new Error("Failed to load user downloads");const o=await n.json();K({id:a,name:t}),J(o.downloads||[]),we({count:o.count||0,period:o.period||"Today"}),q(s),R(!0)}catch(n){console.error("Failed to load user downloads:",n),r("Failed to load user downloads","error")}},W=async a=>{D.id&&await T(D.id,D.name,a)};if(B==="loading")return e.createElement("div",{className:"saas-loading"},e.createElement("div",{className:"spinner"}));if(B==="unauthorized")return e.createElement("div",{className:"saas-unauthorized"},e.createElement("div",{className:"auth-card"},e.createElement("h1",{className:"auth-title"},"Unauthorized"),e.createElement("p",{className:"auth-subtitle"},"You don't have permission to access this area.")));const $=d.filter(a=>a.status==="pending"),xe=d.filter(a=>a.status==="approved"),ke=d.filter(a=>a.status==="admin");let u=d;return m==="pending"&&(u=$),m==="approved"&&(u=xe),m==="admin"&&(u=ke),e.createElement("div",{className:"saas-layout"},e.createElement("aside",{className:"saas-sidebar"},e.createElement("div",{className:"saas-brand"},e.createElement("div",{className:"saas-logo"},"TK"),e.createElement("span",{className:"saas-brand-name"},"TubeKit")),e.createElement("nav",{className:"saas-nav"},e.createElement("button",{className:`saas-nav-item ${h==="users"?"active":""}`,onClick:()=>j("users")},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.createElement("circle",{cx:"9",cy:"7",r:"4"}),e.createElement("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.createElement("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),"Users"),e.createElement("button",{className:`saas-nav-item ${h==="serials"?"active":""}`,onClick:()=>j("serials")},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})),"Serials"))),e.createElement("main",{className:"saas-main"},e.createElement("header",{className:"saas-header"},e.createElement("h1",{className:"saas-page-title"},h==="users"?"User Management":"Serial Analytics"),e.createElement("div",{className:"saas-user-menu"},e.createElement("span",{className:"saas-badge"},"Admin"))),e.createElement("div",{className:"saas-stats-grid"},e.createElement("div",{className:"saas-stat-card"},e.createElement("div",{className:"saas-stat-icon blue"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.createElement("polyline",{points:"7 10 12 15 17 10"}),e.createElement("line",{x1:"12",y1:"15",x2:"12",y2:"3"}))),e.createElement("div",{className:"saas-stat-info"},e.createElement("span",{className:"saas-stat-label"},"Total Downloads"),e.createElement("span",{className:"saas-stat-value"},F.totalDownloads||0))),e.createElement("div",{className:"saas-stat-card"},e.createElement("div",{className:"saas-stat-icon green"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),e.createElement("polyline",{points:"17 6 23 6 23 12"}))),e.createElement("div",{className:"saas-stat-info"},e.createElement("span",{className:"saas-stat-label"},"Downloads Today"),e.createElement("span",{className:"saas-stat-value"},F.downloadsToday||0))),e.createElement("div",{className:"saas-stat-card"},e.createElement("div",{className:"saas-stat-icon purple"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"}))),e.createElement("div",{className:"saas-stat-info"},e.createElement("span",{className:"saas-stat-label"},"Last 7 Days"),e.createElement("span",{className:"saas-stat-value"},F.downloadsLastWeek||0))),e.createElement("div",{className:"saas-stat-card"},e.createElement("div",{className:"saas-stat-icon orange"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.createElement("circle",{cx:"9",cy:"7",r:"4"}))),e.createElement("div",{className:"saas-stat-info"},e.createElement("span",{className:"saas-stat-label"},"Total Users"),e.createElement("span",{className:"saas-stat-value"},d.length)))),e.createElement("div",{className:"saas-content-area"},h==="users"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"saas-filters"},e.createElement("button",{className:`saas-filter-btn ${m==="all"?"active":""}`,onClick:()=>b("all")},"All Users"),e.createElement("button",{className:`saas-filter-btn ${m==="pending"?"active":""}`,onClick:()=>b("pending")},"Pending ",$.length>0&&e.createElement("span",{className:"saas-count-badge warning"},$.length)),e.createElement("button",{className:`saas-filter-btn ${m==="approved"?"active":""}`,onClick:()=>b("approved")},"Active"),e.createElement("button",{className:`saas-filter-btn ${m==="admin"?"active":""}`,onClick:()=>b("admin")},"Admins")),e.createElement("div",{className:"saas-table-wrapper"},e.createElement("table",{className:"saas-table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"User"),e.createElement("th",null,"Status"),e.createElement("th",null,"WhatsApp"),e.createElement("th",null,"Notifications"),e.createElement("th",null,"Activity"),e.createElement("th",{className:"text-right"},"Actions"))),e.createElement("tbody",null,u.map(a=>{const t=a.status==="pending",s=a.plan_expiry_date?new Date(a.plan_expiry_date)<new Date:!0,n=a.plan_expiry_date?new Date(a.plan_expiry_date).toLocaleDateString():"-";return e.createElement("tr",{key:a.id},e.createElement("td",null,e.createElement("div",{className:"saas-user-cell"},e.createElement("div",{className:"saas-user-avatar"},a.name.charAt(0).toUpperCase()),e.createElement("div",{className:"saas-user-details"},e.createElement("span",{className:"saas-user-name"},a.name),e.createElement("span",{className:"saas-user-email"},a.email)))),e.createElement("td",null,t?e.createElement("span",{className:"saas-status-badge warning"},"Pending"):a.status==="admin"?e.createElement("span",{className:"saas-status-badge info"},"Admin"):e.createElement("div",{className:"saas-plan-info"},e.createElement("span",{className:`saas-status-badge ${s?"danger":"success"}`},s?"Expired":"Active"),e.createElement("span",{className:"saas-plan-date"},n))),e.createElement("td",null,e.createElement("div",{className:"saas-wa-cell"},e.createElement("span",{className:"saas-wa-number"},a.whatsapp||"-"),e.createElement("button",{className:"saas-btn-icon small",onClick:()=>ae(a.id,a.whatsapp),title:"Edit WhatsApp"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))))),e.createElement("td",null,e.createElement("div",{className:"saas-noti-cell"},e.createElement("span",{className:`saas-status-badge ${a.wa_noti?"success":"danger"}`},a.wa_noti?"Enabled":"Disabled"),e.createElement("button",{className:"saas-btn-icon small",onClick:()=>te(a.id,a.wa_noti),title:a.wa_noti?"Disable Notifications":"Enable Notifications"},a.wa_noti?e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.createElement("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})):e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.createElement("line",{x1:"13.73",y1:"21",x2:"10.27",y2:"21"}),e.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"}))))),e.createElement("td",null,e.createElement("div",{className:"saas-activity-cell"},e.createElement("div",{className:"saas-activity-stats"},e.createElement("span",null,a.totalDownloads||0," DLs"),e.createElement("span",{className:"sub"},a.total_logins||0," logins")))),e.createElement("td",null,e.createElement("div",{className:"saas-actions-cell"},t?e.createElement(e.Fragment,null,e.createElement("div",{className:"saas-trial-input"},e.createElement("input",{type:"number",min:"1",placeholder:"3",value:M[a.id]||"",onChange:o=>_(N=>({...N,[a.id]:Number(o.target.value)}))}),e.createElement("span",null,"days")),e.createElement("button",{className:"saas-btn-icon success",onClick:()=>X(a.id),title:"Approve"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("polyline",{points:"20 6 9 17 4 12"}))),e.createElement("button",{className:"saas-btn-icon danger",onClick:()=>Z(a.id),title:"Reject"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})))):e.createElement(e.Fragment,null,e.createElement("button",{className:"saas-btn-icon primary",onClick:()=>le(a.id,a.name),title:"Extend Plan"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}))),e.createElement("button",{className:"saas-btn-icon",onClick:()=>ne(a.id,a.name),title:"View Serials"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("rect",{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"}),e.createElement("polyline",{points:"17 2 12 7 7 2"}))),e.createElement("button",{className:"saas-btn-icon",onClick:()=>se(a.id,a.name),title:"History"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("circle",{cx:"12",cy:"12",r:"10"}),e.createElement("polyline",{points:"12 6 12 12 16 14"}))),e.createElement("button",{className:"saas-btn-icon",onClick:()=>T(a.id,a.name,"today"),title:"View Downloads"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.createElement("polyline",{points:"7 10 12 15 17 10"}),e.createElement("line",{x1:"12",y1:"15",x2:"12",y2:"3"})))),e.createElement("button",{className:"saas-btn-icon danger",onClick:()=>ee(a.id,a.name),title:"Delete"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("polyline",{points:"3 6 5 6 21 6"}),e.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}))))))}),u.length===0&&e.createElement("tr",null,e.createElement("td",{colSpan:"6",className:"saas-empty-state"},"No users found"))))),e.createElement("div",{className:"saas-mobile-cards"},u.map(a=>{const t=a.status==="pending",s=a.plan_expiry_date?new Date(a.plan_expiry_date)<new Date:!0,n=a.plan_expiry_date?new Date(a.plan_expiry_date).toLocaleDateString():"-";return e.createElement("div",{key:a.id,className:"saas-mobile-card"},e.createElement("div",{className:"saas-mobile-card-header"},e.createElement("div",{className:"saas-user-cell"},e.createElement("div",{className:"saas-user-avatar"},a.name.charAt(0).toUpperCase()),e.createElement("div",{className:"saas-user-details"},e.createElement("span",{className:"saas-user-name"},a.name),e.createElement("span",{className:"saas-user-email"},a.email))),e.createElement("div",null,t?e.createElement("span",{className:"saas-status-badge warning"},"Pending"):a.status==="admin"?e.createElement("span",{className:"saas-status-badge info"},"Admin"):e.createElement("div",{className:"saas-plan-info"},e.createElement("span",{className:`saas-status-badge ${s?"danger":"success"}`},s?"Expired":"Active"),e.createElement("span",{className:"saas-plan-date"},n)))),e.createElement("div",{className:"saas-mobile-card-body"},e.createElement("div",{className:"saas-mobile-two-col"},e.createElement("div",{className:"saas-mobile-col"},e.createElement("span",{className:"saas-mobile-label"},"WhatsApp"),e.createElement("div",{className:"saas-wa-cell"},e.createElement("span",{className:"saas-wa-number"},a.whatsapp||"-"),e.createElement("button",{className:"saas-btn-icon small",onClick:()=>ae(a.id,a.whatsapp),title:"Edit WhatsApp"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))))),e.createElement("div",{className:"saas-mobile-col"},e.createElement("span",{className:"saas-mobile-label"},"Notifications"),e.createElement("div",{className:"saas-noti-cell"},e.createElement("span",{className:`saas-status-badge ${a.wa_noti?"success":"danger"}`},a.wa_noti?"Enabled":"Disabled"),e.createElement("button",{className:"saas-btn-icon small",onClick:()=>te(a.id,a.wa_noti),title:a.wa_noti?"Disable Notifications":"Enable Notifications"},a.wa_noti?e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.createElement("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})):e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.createElement("line",{x1:"13.73",y1:"21",x2:"10.27",y2:"21"}),e.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"})))))),e.createElement("div",{className:"saas-mobile-row"},e.createElement("span",{className:"saas-mobile-label"},"Activity"),e.createElement("div",{className:"saas-activity-cell"},e.createElement("div",{className:"saas-activity-stats"},e.createElement("span",null,a.totalDownloads||0," DLs"),e.createElement("span",{className:"sub"},a.total_logins||0," logins"))))),e.createElement("div",{className:"saas-mobile-card-footer"},t?e.createElement(e.Fragment,null,e.createElement("div",{className:"saas-trial-input"},e.createElement("input",{type:"number",min:"1",placeholder:"3",value:M[a.id]||"",onChange:o=>_(N=>({...N,[a.id]:Number(o.target.value)}))}),e.createElement("span",null,"days")),e.createElement("button",{className:"saas-btn-icon success",onClick:()=>X(a.id),title:"Approve"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("polyline",{points:"20 6 9 17 4 12"}))),e.createElement("button",{className:"saas-btn-icon danger",onClick:()=>Z(a.id),title:"Reject"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})))):e.createElement(e.Fragment,null,e.createElement("button",{className:"saas-btn-icon primary",onClick:()=>le(a.id,a.name),title:"Extend Plan"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}))),e.createElement("button",{className:"saas-btn-icon",onClick:()=>ne(a.id,a.name),title:"View Serials"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("rect",{x:"2",y:"7",width:"20",height:"15",rx:"2",ry:"2"}),e.createElement("polyline",{points:"17 2 12 7 7 2"}))),e.createElement("button",{className:"saas-btn-icon",onClick:()=>se(a.id,a.name),title:"History"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("circle",{cx:"12",cy:"12",r:"10"}),e.createElement("polyline",{points:"12 6 12 12 16 14"}))),e.createElement("button",{className:"saas-btn-icon",onClick:()=>T(a.id,a.name,"today"),title:"View Downloads"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.createElement("polyline",{points:"7 10 12 15 17 10"}),e.createElement("line",{x1:"12",y1:"15",x2:"12",y2:"3"}))),e.createElement("button",{className:"saas-btn-icon danger",onClick:()=>ee(a.id,a.name),title:"Delete"},e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("polyline",{points:"3 6 5 6 21 6"}),e.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}))))))}),u.length===0&&e.createElement("div",{className:"saas-empty-state"},"No users found"))),h==="serials"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"saas-table-wrapper"},e.createElement("table",{className:"saas-table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Serial Name"),e.createElement("th",null,"Platform"),e.createElement("th",null,"Today"),e.createElement("th",null,"Yesterday"),e.createElement("th",null,"7 Days"),e.createElement("th",null,"30 Days"),e.createElement("th",{className:"text-right font-bold"},"Total"))),e.createElement("tbody",null,i.slice(c*30,(c+1)*30).map(a=>e.createElement("tr",{key:a.id},e.createElement("td",{className:"font-medium"},a.name),e.createElement("td",null,e.createElement("span",{className:"saas-platform-badge"},a.platform_name)),e.createElement("td",null,a.downloadsToday||0),e.createElement("td",null,a.downloadsYesterday||0),e.createElement("td",null,a.downloadsLast7Days||0),e.createElement("td",null,a.downloadsLast30Days||0),e.createElement("td",{className:"text-right font-bold"},a.totalDownloads||0))))),i.length>30&&e.createElement("div",{className:"saas-pagination"},e.createElement("button",{onClick:()=>f(Math.max(0,c-1)),disabled:c===0},"Previous"),e.createElement("span",null,"Page ",c+1),e.createElement("button",{onClick:()=>f(Math.min(Math.ceil(i.length/30)-1,c+1)),disabled:c>=Math.ceil(i.length/30)-1},"Next"))),e.createElement("div",{className:"saas-mobile-cards"},i.slice(c*30,(c+1)*30).map(a=>e.createElement("div",{key:a.id,className:"saas-mobile-card saas-serial-card"},e.createElement("div",{className:"saas-mobile-card-header"},e.createElement("div",null,e.createElement("span",{className:"saas-user-name"},a.name),e.createElement("span",{className:"saas-platform-badge"},a.platform_name))),e.createElement("div",{className:"saas-serial-stats-grid"},e.createElement("div",{className:"saas-stat-item"},e.createElement("span",{className:"saas-stat-label"},"Today"),e.createElement("span",{className:"saas-stat-value"},a.downloadsToday||0)),e.createElement("div",{className:"saas-stat-item"},e.createElement("span",{className:"saas-stat-label"},"Yesterday"),e.createElement("span",{className:"saas-stat-value"},a.downloadsYesterday||0)),e.createElement("div",{className:"saas-stat-item"},e.createElement("span",{className:"saas-stat-label"},"7 Days"),e.createElement("span",{className:"saas-stat-value"},a.downloadsLast7Days||0)),e.createElement("div",{className:"saas-stat-item"},e.createElement("span",{className:"saas-stat-label"},"30 Days"),e.createElement("span",{className:"saas-stat-value"},a.downloadsLast30Days||0)),e.createElement("div",{className:"saas-stat-item saas-stat-total"},e.createElement("span",{className:"saas-stat-label"},"Total"),e.createElement("span",{className:"saas-stat-value"},a.totalDownloads||0))))),i.length>30&&e.createElement("div",{className:"saas-pagination"},e.createElement("button",{onClick:()=>f(Math.max(0,c-1)),disabled:c===0},"Previous"),e.createElement("span",null,"Page ",c+1),e.createElement("button",{onClick:()=>f(Math.min(Math.ceil(i.length/30)-1,c+1)),disabled:c>=Math.ceil(i.length/30)-1},"Next")))))),ie&&e.createElement("div",{className:"saas-modal-overlay"},e.createElement("div",{className:"saas-modal large"},e.createElement("div",{className:"saas-modal-header"},e.createElement("h3",null,"Login History"),e.createElement("button",{onClick:()=>H(!1)},"✕")),e.createElement("div",{className:"saas-modal-content scrollable"},e.createElement("div",{className:"saas-timeline"},L.map((a,t)=>{var s;return e.createElement("div",{key:t,className:"saas-timeline-item"},e.createElement("div",{className:"saas-timeline-date"},new Date(a.timestamp).toLocaleString()),e.createElement("div",{className:"saas-timeline-details"},e.createElement("div",{className:"saas-timeline-row"},e.createElement("span",null,"IP: ",a.ip),e.createElement("span",null,"Device: ",(s=a.device_fingerprint)==null?void 0:s.substring(0,12),"...")),e.createElement("div",{className:"saas-timeline-meta"},a.user_agent)))}),L.length===0&&e.createElement("p",{className:"text-center text-muted"},"No history available"))))),ue&&e.createElement("div",{className:"saas-modal-overlay"},e.createElement("div",{className:"saas-modal small"},e.createElement("div",{className:"saas-modal-header"},e.createElement("h3",null,"Confirm Deletion"),e.createElement("button",{onClick:()=>{p(!1),v(null)}},"✕")),e.createElement("div",{className:"saas-modal-content"},e.createElement("p",null,"Are you sure you want to delete ",e.createElement("strong",null,y==null?void 0:y.name),"? This action cannot be undone."),e.createElement("div",{className:"saas-modal-actions"},e.createElement("button",{className:"saas-btn secondary",onClick:()=>{p(!1),v(null)}},"Cancel"),e.createElement("button",{className:"saas-btn danger",onClick:ge},"Delete User"))))),pe&&e.createElement("div",{className:"saas-modal-overlay"},e.createElement("div",{className:"saas-modal small"},e.createElement("div",{className:"saas-modal-header"},e.createElement("h3",null,"Update WhatsApp"),e.createElement("button",{onClick:()=>{x(!1),w({userId:null,current:""})}},"✕")),e.createElement("div",{className:"saas-modal-content"},e.createElement("div",{className:"saas-form-group"},e.createElement("label",null,"WhatsApp Number"),e.createElement("input",{type:"text",value:k.current,onChange:a=>w(t=>({...t,current:a.target.value})),placeholder:"+1234567890",autoFocus:!0})),e.createElement("div",{className:"saas-modal-actions"},e.createElement("button",{className:"saas-btn secondary",onClick:()=>{x(!1),w({userId:null,current:""})}},"Cancel"),e.createElement("button",{className:"saas-btn primary",onClick:be},"Update"))))),ve&&e.createElement("div",{className:"saas-modal-overlay"},e.createElement("div",{className:"saas-modal small"},e.createElement("div",{className:"saas-modal-header"},e.createElement("h3",null,"Extend Plan"),e.createElement("button",{onClick:()=>{C(!1),g({userId:null,userName:"",days:"30"})}},"✕")),e.createElement("div",{className:"saas-modal-content"},e.createElement("div",{className:"saas-form-group"},e.createElement("label",null,"Add Days"),e.createElement("input",{type:"number",value:S.days,onChange:a=>g(t=>({...t,days:a.target.value})),min:"1",autoFocus:!0})),e.createElement("div",{className:"saas-modal-actions"},e.createElement("button",{className:"saas-btn secondary",onClick:()=>{C(!1),g({userId:null,userName:"",days:"30"})}},"Cancel"),e.createElement("button",{className:"saas-btn primary",onClick:fe},"Extend"))))),Ne&&e.createElement("div",{className:"saas-modal-overlay"},e.createElement("div",{className:"saas-modal large"},e.createElement("div",{className:"saas-modal-header"},e.createElement("h3",null,he.name,"'s Serials"),e.createElement("button",{onClick:()=>{I(!1),V([]),O({id:null,name:""})}},"✕")),e.createElement("div",{className:"saas-modal-content scrollable"},z.length===0?e.createElement("p",{className:"text-center text-muted"},"No serials added yet"):e.createElement("div",{className:"saas-serials-list"},z.map(a=>e.createElement("div",{key:a.id,className:"saas-serial-item"},e.createElement("div",{className:"saas-serial-item-info"},e.createElement("div",{className:"saas-serial-item-name"},a.name),e.createElement("div",{className:"saas-serial-item-meta"},e.createElement("span",{className:"saas-platform-badge"},a.platform_name),e.createElement("span",{className:"saas-serial-date"},"Added: ",new Date(a.added_at).toLocaleDateString()))))))))),ye&&e.createElement("div",{className:"saas-modal-overlay"},e.createElement("div",{className:"saas-modal large"},e.createElement("div",{className:"saas-modal-header"},e.createElement("h3",null,D.name,"'s Downloads"),e.createElement("button",{onClick:()=>{R(!1),J([]),K({id:null,name:""}),q("today")}},"✕")),e.createElement("div",{className:"saas-modal-content"},e.createElement("div",{className:"saas-download-filters"},e.createElement("button",{className:`saas-filter-btn ${A==="today"?"active":""}`,onClick:()=>W("today")},"Today"),e.createElement("button",{className:`saas-filter-btn ${A==="yesterday"?"active":""}`,onClick:()=>W("yesterday")},"Yesterday"),e.createElement("button",{className:`saas-filter-btn ${A==="week"?"active":""}`,onClick:()=>W("week")},"Week"),e.createElement("button",{className:`saas-filter-btn ${A==="30days"?"active":""}`,onClick:()=>W("30days")},"30 Days")),e.createElement("div",{className:"saas-download-summary"},e.createElement("span",{className:"saas-download-count"},G.count," downloads"),e.createElement("span",{className:"saas-download-period"},G.period)),e.createElement("div",{className:"saas-modal-content scrollable",style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border)"}},Y.length===0?e.createElement("p",{className:"text-center text-muted"},"No downloads found for this period"):e.createElement("div",{className:"saas-downloads-list"},Y.map(a=>e.createElement("div",{key:a.id,className:"saas-download-item"},e.createElement("div",{className:"saas-download-item-info"},e.createElement("div",{className:"saas-download-item-name"},a.name,a.download_count>1&&e.createElement("span",{className:"saas-download-count-badge"},"+",a.download_count)),e.createElement("div",{className:"saas-download-item-meta"},e.createElement("span",{className:"saas-platform-badge"},a.platform_name)))))))))),P.show&&e.createElement("div",{className:`saas-toast ${P.type}`},P.message))}Ce(document.getElementById("root")).render(e.createElement(Se,null));
